<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Air Hockey</title>
    <style>
      * { padding: 0; margin: 0; }
      canvas { background: #eee; display: block; margin: 0 auto }
    </style>
  </head>
  <body>

    <canvas id="myCanvas" width= "480" height="320"></canvas>
    <script type="text/javascript">
      var canvas = document.getElementById("myCanvas");
      var ctx = canvas.getContext("2d");
      var x = canvas.width / 2
      var y = canvas.height / 2
      var dx = 3;
      var dy = -3;
      var puckRadius = 10;

      var blockerOneHeight = 45;
      var blockerOneWidth = 10;
      var blockerOneY = (canvas.height - blockerOneHeight) / 2;
      var blockerOneX = 0;

      var blockerTwoHeight = 45;
      var blockerTwoWidth = 10;
      var blockerTwoY = (canvas.height - blockerTwoHeight) / 2;
      var blockerTwoX = canvas.width - blockerTwoWidth;

      var upOnePressed = false;
      var downOnePressed = false;
      var leftOnePressed = false;
      var rightOnePressed = false;

      var upTwoPressed = false;
      var downTwoPressed = false;
      var leftTwoPressed = false;
      var rightTwoPressed = false;

      document.addEventListener("keydown", keyDownHandler, false);
      document.addEventListener("keyup", keyUpHandler, false)

      function keyDownHandler(e) {
        if (e.key == "w") {
          upOnePressed = true;
        } else if (e.key == "s") {
          downOnePressed = true;
        } else if (e.key == "a") {
          leftOnePressed = true;
        } else if (e.key == "d") {
          rightOnePressed = true;
        }

        if (e.key == "ArrowUp") {
          upTwoPressed = true;
        } else if (e.key == "ArrowDown") {
          downTwoPressed = true;
        } else if (e.key == "ArrowLeft") {
          leftTwoPressed = true;
        } else if (e.key == "ArrowRight") {
          rightTwoPressed = true;
        }
      }

      function keyUpHandler(e) {
        if (e.key == "w") {
          upOnePressed = false;
        } else if (e.key == "s") {
          downOnePressed = false;
        } else if (e.key == "a") {
          leftOnePressed = false;
        } else if (e.key == "d") {
          rightOnePressed = false;
        }

        if (e.key == "ArrowUp") {
          upTwoPressed = false;
        } else if (e.key == "ArrowDown") {
          downTwoPressed = false;
        } else if (e.key == "ArrowLeft") {
          leftTwoPressed = false;
        } else if (e.key == "ArrowRight") {
          rightTwoPressed = false;
        }
      }


      function drawPuck() {
        ctx.beginPath();
        ctx.arc(x, y, puckRadius, 0, Math.PI * 2);
        ctx.fillStyle = "black";
        ctx.fill();
        ctx.closePath();
      }

      function drawBlockerOne() {
        ctx.beginPath();
        ctx.rect(blockerOneX, blockerOneY, blockerOneWidth, blockerOneHeight )
        ctx.fillStyle = "blue"
        ctx.fill();
        ctx.closePath();
      }

      function drawBlockerTwo() {
        ctx.beginPath();
        ctx.rect(blockerTwoX, blockerTwoY, blockerTwoWidth, blockerTwoHeight )
        ctx.fillStyle = "red"
        ctx.fill();
        ctx.closePath();
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawPuck();
        drawBlockerOne();
        drawBlockerTwo();

        if (x + dx > canvas.width - puckRadius || x + dx < puckRadius) {
          dx = -dx;
        }
        if (y + dy > canvas.height - puckRadius || y + dy < puckRadius) {
          dy = -dy;
        }

        if (upOnePressed && blockerOneY > 0) {
          blockerOneY -= 7;
        } else if (downOnePressed && blockerOneY < canvas.height - blockerOneHeight) {
          blockerOneY +=7;
        } else if (leftOnePressed && blockerOneX > 0) {
          blockerOneX -=7;
        } else if (rightOnePressed && blockerOneX < (canvas.width / 2) - blockerOneWidth) {
          blockerOneX += 7;
        }

        if (upTwoPressed && blockerTwoY > 0) {
          blockerTwoY -= 7;
        } else if (downTwoPressed && blockerTwoY < canvas.height - blockerTwoHeight) {
          blockerTwoY +=7;
        } else if (leftTwoPressed && blockerTwoX > (canvas.width / 2) + blockerTwoWidth) {
          blockerTwoX -=7;
        } else if (rightTwoPressed && blockerTwoX < (canvas.width - blockerTwoWidth)) {
          blockerTwoX += 7;
        }

        x += dx;
        y += dy;
      }



      setInterval(draw, 10);
    </script>

  </body>
</html>
